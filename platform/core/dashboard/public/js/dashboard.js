(()=>{"use strict";var e={3744:(e,t)=>{t.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[e,n]of t)r[e]=n;return r}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}(()=>{const e=Vue;var t={key:0,class:"note note-warning"},n=["href"];const o={props:{verifyUrl:{type:String,default:function(){return null},required:!0},settingUrl:{type:String,default:function(){return null},required:!0}},data:function(){return{verified:!0}},mounted:function(){this.verifyLicense()},methods:{verifyLicense:function(){var e=this;axios.get(this.verifyUrl).then((function(t){t.data.error&&(e.verified=!1)}))}}};var a=r(3744);const l=(0,a.Z)(o,[["render",function(r,o,a,l,i,s){return i.verified?(0,e.createCommentVNode)("",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",t,[(0,e.createElementVNode)("p",null,[(0,e.createTextVNode)(" Your license is invalid, please contact support. If you didn't setup license code, please go to "),(0,e.createElementVNode)("a",{href:a.settingUrl},"Settings",8,n),(0,e.createTextVNode)(" to activate license! ")])]))}]]);var i={key:0,class:"note note-warning"},s=["href"];const d={props:{checkUpdateUrl:{type:String,default:function(){return null},required:!0},settingUrl:{type:String,default:function(){return null},required:!0}},data:function(){return{hasNewVersion:!1,message:null}},mounted:function(){this.checkUpdate()},methods:{checkUpdate:function(){var e=this;axios.get(this.checkUpdateUrl).then((function(t){!t.data.error&&t.data.data.has_new_version&&(e.hasNewVersion=!0,e.message=t.data.message)}))}}},c=(0,a.Z)(d,[["render",function(t,r,n,o,a,l){return a.hasNewVersion?((0,e.openBlock)(),(0,e.createElementBlock)("div",i,[(0,e.createElementVNode)("p",null,[(0,e.createTextVNode)((0,e.toDisplayString)(a.message)+", please go to ",1),(0,e.createElementVNode)("a",{href:n.settingUrl},"System Updater",8,s),(0,e.createTextVNode)(" to upgrade to the latest version!")])])):(0,e.createCommentVNode)("",!0)}]]);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===u(a)?a:String(a)),n)}var o,a}"undefined"!=typeof vueApp&&vueApp.booting((function(e){e.component("verify-license-component",l),e.component("check-update-component",c)}));var f={},g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"loadWidget",value:function(t,r,n,o){var a=t.closest(".widget_item"),l=a.attr("id");void 0!==o&&(f[l]=o);var i=a.find("a.collapse-expand");if(!i.length||!i.hasClass("collapse")){Botble.blockUI({target:t,iconOnly:!0,overlayColor:"none"}),void 0!==n&&null!=n||(n={});var s=a.find("select[name=predefined_range]");s.length&&(n.predefined_range=s.val()),$.ajax({type:"GET",cache:!1,url:r,data:n,success:function(r){Botble.unblockUI(t),r.error?t.html('<div class="dashboard_widget_msg col-12"><p>'+r.message+"</p>"):(t.html(r.data),void 0!==o?o():f[l]&&f[l](),0!==t.find(".scroller").length&&Botble.callScroll(t.find(".scroller")),$(".equal-height").equalHeights(),e.initSortable())},error:function(e){Botble.unblockUI(t),Botble.handleError(e)}})}}},{key:"initSortable",value:function(){if($("#list_widgets").length>0){var e=document.getElementById("list_widgets");Sortable.create(e,{group:"widgets",sort:!0,delay:0,disabled:!1,store:null,animation:150,handle:".portlet-title",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dataIdAttr:"data-id",forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,scroll:!0,scrollSensitivity:30,scrollSpeed:10,onUpdate:function(){var e=[];$.each($(".widget_item"),(function(t,r){e.push($(r).prop("id"))})),$.ajax({type:"POST",cache:!1,url:route("dashboard.update_widget_order"),data:{items:e},success:function(e){e.error?Botble.showError(e.message):Botble.showSuccess(e.message)},error:function(e){Botble.handleError(e)}})}})}}}],(r=[{key:"init",value:function(){var t=$("#list_widgets");$(document).on("click",".portlet > .portlet-title .tools > a.remove",(function(e){e.preventDefault(),$("#hide-widget-confirm-bttn").data("id",$(e.currentTarget).closest(".widget_item").prop("id")),$("#hide_widget_modal").modal("show")})),t.on("click",".page_next, .page_previous",(function(t){t.preventDefault();var r=$(t.currentTarget),n=r.prop("href");n&&e.loadWidget(r.closest(".portlet").find(".portlet-body"),n)})),t.on("change",".number_record .numb",(function(t){t.preventDefault();var r=$(t.currentTarget),n=r.closest(".number_record").find(".numb").val();!isNaN(n)&&n>0?e.loadWidget(r.closest(".portlet").find(".portlet-body"),r.closest(".widget_item").attr("data-url"),{paginate:n}):Botble.showError("Please input a number!")})),t.on("click",".btn_change_paginate",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.closest(".number_record").find(".numb"),n=parseInt(r.prop("min")||5),o=parseInt(r.prop("max")||100),a=parseInt(r.prop("step")||5),l=parseInt(r.val());t.hasClass("btn_up")?l<o&&(l+=a):t.hasClass("btn_down")&&(l-a>0?l-=a:l=a,l<n&&(l=n)),l!=parseInt(r.val())&&r.val(l).trigger("change")})),$("#hide-widget-confirm-bttn").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget).data("id");$.ajax({type:"GET",cache:!1,url:route("dashboard.hide_widget",{name:t}),success:function(r){r.error?Botble.showError(r.message):($("#"+t).fadeOut(),Botble.showSuccess(r.message)),$("#hide_widget_modal").modal("hide");var n=$(e.currentTarget).closest(".portlet");$(document).hasClass("page-portlet-fullscreen")&&$(document).removeClass("page-portlet-fullscreen"),n.find("[data-bs-toggle=tooltip]").tooltip("destroy"),n.remove()},error:function(e){Botble.handleError(e)}})})),$(document).on("click",".portlet:not(.widget-load-has-callback) > .portlet-title .tools > a.reload",(function(t){t.preventDefault();var r=$(t.currentTarget);e.loadWidget(r.closest(".portlet").find(".portlet-body"),r.closest(".widget_item").attr("data-url"))})),$(document).on("click",".portlet > .portlet-title .tools > .collapse, .portlet .portlet-title .tools > .expand",(function(t){t.preventDefault();var r=$(t.currentTarget),n=r.closest(".portlet"),o=$.trim(r.data("state"));"expand"===o?(n.find(".portlet-body").removeClass("collapse").addClass("expand"),e.loadWidget(n.find(".portlet-body"),r.closest(".widget_item").attr("data-url"))):n.find(".portlet-body").removeClass("expand").addClass("collapse"),$.ajax({type:"POST",cache:!1,url:route("dashboard.edit_widget_setting_item"),data:{name:r.closest(".widget_item").prop("id"),setting_name:"state",setting_value:o},success:function(){"collapse"===o?(r.data("state","expand"),n.find(".predefined-ranges").addClass("d-none"),n.find("a.reload").addClass("d-none"),n.find("a.fullscreen").addClass("d-none")):(r.data("state","collapse"),n.find(".predefined-ranges").removeClass("d-none"),n.find("a.reload").removeClass("d-none"),n.find("a.fullscreen").removeClass("d-none"))},error:function(e){Botble.handleError(e)}})})),$(document).on("change",".portlet select[name=predefined_range]",(function(t){t.preventDefault();var r=$(t.currentTarget);e.loadWidget(r.closest(".portlet").find(".portlet-body"),r.closest(".widget_item").attr("data-url"),{changed_predefined_range:1})}));var r=$("#manage_widget_modal");$(document).on("click",".manage-widget",(function(e){e.preventDefault(),r.modal("show")})),r.on("change",".swc_wrap input",(function(e){$(e.currentTarget).closest("section").find("i").toggleClass("widget_none_color")}))}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();$(document).ready((function(){(new g).init(),window.BDashboard=g}))})()})();